/*
 * This Groovy source file was generated by the Gradle 'init' task.
 */
package com.mikebuyshouses.dncscrubber

import com.mikebuyshouses.dncscrubber.csvmanip.CSVSheetReader
import com.mikebuyshouses.dncscrubber.csvmanip.CSVSheetWriter
import com.mikebuyshouses.dncscrubber.csvmanip.DNCScrubber
import com.mikebuyshouses.dncscrubber.models.BatchSkipTracingDataRowModel
import com.mikebuyshouses.dncscrubber.utils.CommandLineParser

class App {
    static void main(String[] args) {
        CommandLineParser parser = new CommandLineParser();
        parser.parseArgs(args);

        println "Reading in the CSV file '${parser.getInputFilename()}'..."
        List<BatchSkipTracingDataRowModel> csvData = new CSVSheetReader(BatchSkipTracingDataRowModel.class)
            .read(parser.getInputFilename());

        println "Scrubbing the DNC records...";
        List<BatchSkipTracingDataRowModel> scrubbedCsvData = new DNCScrubber().scrubCsvData(csvData);

        println "Outputting to output file '${parser.getOutputFilename()}'..."
        new CSVSheetWriter(BatchSkipTracingDataRowModel.class)
            .write(scrubbedCsvData, parser.getOutputFilename());

        println "All done!";
    }
}

